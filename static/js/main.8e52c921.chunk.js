(this["webpackJsonpwhatsapp-clone-stajan5"]=this["webpackJsonpwhatsapp-clone-stajan5"]||[]).push([[0],{68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},79:function(e,t,a){},81:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var c=a(4),s=a(2),n=a.n(s),o=a(26),r=a.n(o),i=(a(68),a(69),a(28)),l=(a(70),a(98)),d=a(43),j=a.n(d),b=(a(71),a(34));var u=function(e){var t=e.id,a=e.name;return console.log(t,a),Object(c.jsx)(b.b,{to:"/rooms/".concat(t),children:Object(c.jsx)("div",{className:"sidebar_chat",children:Object(c.jsxs)("div",{className:"start_chat",children:[Object(c.jsx)("div",{className:"Avatar",children:Object(c.jsx)(l.a,{src:"https://avatars.dicebear.com/api/human/".concat(t,".svg")})}),Object(c.jsxs)("div",{className:"start_chat_name_last_message",children:[Object(c.jsx)("p",{className:"Name",children:a}),Object(c.jsx)("p",{children:"Last Message...."})]})]})})})},m=a(27),h=m.a.initializeApp({apiKey:"AIzaSyDNzyBhtO2hKRKNHJQxX6JK33eexKfsMsE",authDomain:"chatbox-b45e3.firebaseapp.com",projectId:"chatbox-b45e3",storageBucket:"chatbox-b45e3.appspot.com",messagingSenderId:"609218165702",appId:"1:609218165702:web:4d13cefd0590ec6acf90c7",measurementId:"G-R3HVEQ7CLG"}).firestore(),p=m.a.auth(),O=new m.a.auth.GoogleAuthProvider,x=h,f=a(16),v=a(44),g=Object(v.b)({name:"user",initialState:{username:null,photourl:"",email:""},reducers:{setUsername:function(e,t){e.username=t.payload.userdetails,e.photourl=t.payload.photourl,e.email=t.payload.email},logout:function(e){e.username=null}}}),N=g.actions,_=N.setUsername,w=N.logout,y=function(e){return e.user.username},S=function(e){return e.user.photourl},k=function(e){return e.user.email},C=g.reducer;var I=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),a=t[0],n=t[1],o=Object(f.c)(y),r=Object(f.c)(k),d=Object(f.c)(S);return Object(s.useEffect)((function(){x.collection("rooms").orderBy("timestamp","desc").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})),console.log(a)}),[""]),console.log(a),console.log("sidbar page",o,r,d),console.log("rooms",a),console.log("for avatar icon",o.photourl),Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsxs)("div",{className:"sidebar_header ",children:[Object(c.jsx)(l.a,{src:d}),Object(c.jsxs)("div",{className:"sidebar_header_middle",children:[Object(c.jsx)("h3",{children:o}),Object(c.jsxs)("p",{children:["Singnd in as ",Object(c.jsxs)("span",{children:[" ",r]})]})]}),Object(c.jsx)("div",{className:"sidebar_header_right"})]}),Object(c.jsx)("div",{className:"sidebar_search_outside",children:Object(c.jsxs)("div",{className:"sidebar_search",children:[Object(c.jsx)(j.a,{}),Object(c.jsx)("input",{type:"text",placeholder:"Search or start new chat"})]})}),Object(c.jsx)("div",{onClick:function(){var e=prompt("New room name?");e&&x.collection("rooms").add({personName:e,timestamp:m.a.firestore.FieldValue.serverTimestamp()})},className:"new_chat",children:Object(c.jsx)("h3",{children:"Add  New Chat"})}),Object(c.jsx)("div",{className:"sidebar_chat",children:a.map((function(e){return Object(c.jsx)(u,{id:e.id,name:e.data.personName},e.id)}))})]})},A=(a(79),a(59)),B=a.n(A),D=a(97),E=a(10);var L=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1],o=Object(s.useState)([]),r=Object(i.a)(o,2),d=r[0],b=r[1],u=Object(s.useState)([]),h=Object(i.a)(u,2),p=h[0],O=h[1],v=Object(f.c)(y),g=Object(E.f)().id;console.log("useparam",g),Object(s.useEffect)((function(){g&&x.collection("rooms").doc(g).onSnapshot((function(e){return b(e.data().personName)}))}),[g]),Object(s.useEffect)((function(){x.collection("rooms").doc(g).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return O(e.docs.map((function(e){return e.data()})))}))}),[g]);var N=Object(f.b)();return console.log(d),Object(c.jsxs)("div",{className:"chatbox",children:[Object(c.jsxs)("div",{className:"chatbox_header",children:[Object(c.jsx)(l.a,{className:"chatbox_header_avatar"}),Object(c.jsxs)("div",{className:"chatbox_header_details",children:[Object(c.jsx)("h3",{children:d}),Object(c.jsx)("p",{children:"Last Seen At..."}),Object(c.jsx)(B.a,{onClick:function(e){console.log("cliecked_logout"),N(w()),console.log("cliecked_logout_after_dispatch")}})]})]}),Object(c.jsx)("div",{id:"",className:"message_scroll",children:p.map((function(e){var t;return Object(c.jsx)("div",{className:"chatbox_body",children:Object(c.jsxs)("p",{className:"chatbox_message_sender ".concat(v===e.name&&"chatbox_message_receiver"),children:[Object(c.jsx)("span",{className:"span_name",children:e.name}),e.message,Object(c.jsx)("span",{className:"span_time",children:new Date(null===(t=p.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]})})}))}),Object(c.jsx)("div",{className:"chatbox_footer",children:Object(c.jsxs)("form",{className:"chatbox_footer_form",children:[Object(c.jsx)(j.a,{}),Object(c.jsx)("input",{value:a,onChange:function(e){return n(e.target.value)},type:"text",placeholder:"Type a message"}),Object(c.jsx)(D.a,{onClick:function(e){e.preventDefault(),x.collection("rooms").doc(g).collection("messages").add({message:a,name:v,timestamp:m.a.firestore.FieldValue.serverTimestamp()}),n("")},type:"submit"})]})})]})};a(80),a(81);var K=function(){var e=Object(f.b)(),t=Object(s.useState)([""]),a=Object(i.a)(t,2),n=a[0],o=a[1];return Object(f.c)(y),Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"buttons",children:[Object(c.jsx)(D.a,{className:"f6 grow no-underline br-pill ph3 pv2 mb2 dib white bg-black",disabled:!n,variant:"contained",color:"primary",type:"submit",onClick:function(t){t.preventDefault(),p.signInWithPopup(O).then((function(t){e(_({userdetails:t.user.displayName,photourl:t.user.photoURL,email:t.user.email}))})).catch((function(e){return alert(e)})),o("")},children:"LogMeIn"}),Object(c.jsx)(D.a,{className:"f6 grow no-underline br-pill ph3 pv2 mb2 dib white bg-black",variant:"contained",color:"secondary",onClick:function(t){e(w())},children:"LogMeOut"})]})})};var M=function(){var e=Object(f.c)(y);return console.log("app_page",e),Object(c.jsx)("div",{className:"app",children:e?Object(c.jsx)("div",{className:"app_body",children:Object(c.jsx)(b.a,{children:Object(c.jsxs)(E.c,{children:[Object(c.jsxs)(E.a,{path:"/rooms/:id",children:[Object(c.jsx)(I,{}),Object(c.jsx)(L,{})]}),Object(c.jsx)(I,{}),Object(c.jsx)(L,{}),Object(c.jsx)(E.a,{})]})})}):Object(c.jsx)(K,{})})},J=Object(v.a)({reducer:{user:C}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(f.a,{store:J,children:Object(c.jsx)(M,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[83,1,2]]]);
//# sourceMappingURL=main.8e52c921.chunk.js.map